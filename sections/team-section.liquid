{{ 'gcw-text-section.css' | asset_url | stylesheet_tag }}

{% liquid
    assign bg_color = section.settings.bg_color
    assign content_color = section.settings.content_color
    assign preheading_color = section.settings.preheading_color

    assign padding_top = section.settings.padding_top | append: "px"
    assign padding_bottom = section.settings.padding_bottom | append: "px"

    assign heading = section.settings.heading
    assign preheading = section.settings.preheading
%}

<div class="gcw-text" style="
        --padding-top: {{ padding_top }};
        --padding-bottom: {{ padding_bottom }};
        --bg-color: {{ bg_color }};
        --content-color: {{ content_color }};
        --preheading-color: {{ preheading_color }}">
    <div class="gcw-text__wrapper page-width">
        <div class="gcw-text__inner">
            {% if preheading != blank %}
                <div class="gcw-text__preheading">{{ preheading }}</div>
            {% endif %}

            {% if heading != blank %}
                <div class="gcw-text__heading">{{ heading }}</div>
            {% endif %}

            {% if section.blocks.size > 0 %}
              <div class="gcw-text__carts">
                {% for block in section.blocks %}
                  {% liquid
                    assign bg_color_cart = block.settings.bg_color_cart
                    assign cart_heading = block.settings.cart_heading
                    assign description = block.settings.description
                    assign image = block.settings.image
                  %}

                  <div class="gcw-text__cart cart-team" style="
                          --bg-color-cart: {{ bg_color_cart }};">

                    <div class="cart-team__image">
                      {% if image != blank %}
                        {{ image | image_url: width: 830 | image_tag: preload: true }}
                      {% endif %}
                    </div>

                    {% if heading != blank %}
                      <div class="cart-team__heading">{{ cart_heading }}</div>
                    {% endif %}

                    {% if description != blank %}
                      <div class="cart-team__description">{{ description }}</div>
                    {% endif %}
                  </div>
                {% endfor %}
              </div>
            {% endif %}
        </div>
    </div>
</div>

{% schema %}
{
  "name": "Grid columns with text",
  "tag": "section",
  "class": "section",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "preheading_color",
      "label": "Preheading color",
      "default": "#786e64"
    },
    {
      "type": "color",
      "id": "content_color",
      "label": "Content color",
      "default": "#23201d"
    },
    {
      "type": "text",
      "id": "preheading",
      "label": "Preheading",
      "default": "Preheading"
    },
    {
      "type": "html",
      "id": "heading",
      "label": "Heading",
      "default": "<h2>Heading</h2>"
    },
    {
      "type": "header",
      "content": "Section padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Top padding",
      "default": 160
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 200,
      "step": 2,
      "unit": "px",
      "label": "Bottom padding",
      "default": 144
    }
  ],
  "blocks": [
    {
      "type": "cart",
      "name": "Cart",
      "settings": [
        {
          "type": "color",
          "id": "bg_color_cart",
          "label": "Background color",
          "default": "#f3f2f0"
        },
        {
          "type": "text",
          "id": "cart_heading",
          "label": "Heading",
          "default": "Heading"
        },
        {
          "type": "richtext",
          "id": "description",
          "label": "Description",
          "default": "<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Grid columns with text",
      "blocks": [
        {
          "type": "cart"
        },
        {
          "type": "cart"
        },
        {
          "type": "cart"
        },
        {
          "type": "cart"
        }
      ]
    }
  ]
}
{% endschema %}