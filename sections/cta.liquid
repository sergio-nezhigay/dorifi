{{ 'cta.css' | asset_url | stylesheet_tag }}

{% liquid
    assign heading = section.settings.heading
    assign btn_label = section.settings.btn_label
    assign btn_url = section.settings.btn_url
%}

<div class="cta-wrapper">
    <div class="cta-content">
        {% if heading != blank %}
            <div class="cta-content__heading">{{ heading }}</div>
        {% endif %}

        {% if btn_label != blank %}
            <a href="{{ btn_url }}" class="cta-content__button">{{ btn_label }}</a>
        {% endif %}
    </div>
</div>

<script>
  window.addEventListener('scroll', function () {
    const cta = document.querySelector('.cta-wrapper');
    const triggerOffset = 200;

    if (window.scrollY > triggerOffset) {
      cta.classList.add('active');
    } else {
      cta.classList.remove('active');
    }
  });
</script>

{% schema %}
{
  "name": "CTA",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Heading"
    },
    {
      "type": "header",
      "content": "Button"
    },
    {
      "type": "text",
      "id": "btn_label",
      "label": "Label",
      "default": "Label"
    },
    {
      "type": "url",
      "id": "btn_url",
      "label": "URL"
    }
  ],
  "presets": [
    {
      "name": "CTA"
    }
  ]
}
{% endschema %}